language: r
warnings_are_errors: true
sudo: required

matrix:
  include:
    - env: RVER=STD PKG=DEV
    - env: RVER=STD PKG=STD
    - env: RVER=DEV PKG=STD

r_binary_packages:
  - dplyr
  - tidyr
  - ggplot2
  - testthat
  - changepoint
  - dlm
  # - fGarch
  - forecast
  - KFAS
  - knitr
  - MASS
  - MSwM
  - sp
  - strucchange
  - survival
  - timeSeries
  - vars
  - xts

r_github_packages:
  - jimhester/covr

before_install:
  - if [[ "$RVER" == "DEV" ]]; then
      sh install_rdevel.sh;
    fi
  - echo "options(repos = c(CRAN='http://cran.rstudio.com'))" >> ~/.Rprofile
  - if [[ "$PKG" == "DEV" ]]; then
      Rscript -e 'install.packages("devtools")';
      Rscript -e 'library(devtools);install_github("hadley/ggplot2")';
      Rscript -e 'library(devtools);install_github("hadley/tidyr")';
      Rscript -e 'library(devtools);install_github("hadley/dplyr")';
    fi
  # install latest
  - Rscript -e 'install.packages("roxygen2")';
  - R --version

after_success:
  - Rscript -e 'library(covr);coveralls()'
